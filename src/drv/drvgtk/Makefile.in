INC_DIR = @top_srcdir@/include

SUBNAME = drvgtk
SONAME = lib@PACKAGE_NAME@_$(SUBNAME).so
PROG = $(SONAME).@PACKAGE_VERSION@
CFLAGS = @CFLAGS@ -I$(INC_DIR) -I$(INC_DIR)/common `pkg-config gtk+-3.0 --cflags`
LIBS = @LIBS@ `pkg-config gtk+-3.0 --libs`

SRCS =	drvgtk_main.c \
	drvgtk_interface.c \
	drvgtk_system.c \
	drvgtk_signal_chain.c \
	drvgtk_signal.c \
	drvgtk_pthread.c \
	drvgtk_key_ring_buffer.c \
	drvgtk_transrate_keycode.c \
	drvgtk_keybord_state.c \
	drvgtk_sleep.c \
	drvgtk_malloc.c \
	main_window.c \
	main_screen.c \
	hankaku_font.c

OBJS = $(SRCS:.c=.o)

all: $(PROG)

$(PROG): $(OBJS)
	@CC@ -shared -Wl,-soname,$(SONAME) -o $@ $(OBJS) $(LIBS)

.c.o:
	@CC@ -fPIC $(DEFS) $(CFLAGS) -c -o $@ $<

clean:
	rm -f $(OBJS)
	rm -f $(PROG)

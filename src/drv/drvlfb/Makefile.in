INC_DIR = @top_srcdir@/include

SUBNAME = drvlfb
SONAME = lib@PACKAGE_NAME@_$(SUBNAME).so
PROG = $(SONAME).@PACKAGE_VERSION@
CFLAGS = @CFLAGS@ -I$(INC_DIR) -I$(INC_DIR)/common
LIBS = @LIBS@ -lpthread

SRCS =  drvlfb_main.c \
        drvlfb_interface.c \
        drvlfb_system.c \
        drvlfb_sleep.c \
        drvlfb_malloc.c \
        hankaku_font.c

OBJS = $(SRCS:.c=.o)

all: $(PROG)

$(PROG): $(OBJS)
	@CC@ -shared -Wl,-soname,$(SONAME) -o $@ $(OBJS) $(LIBS)

.c.o:
	@CC@ -fPIC $(DEFS) $(CFLAGS) -c -o $@ $<

clean:
	rm -f $(OBJS)
	rm -f $(PROG)

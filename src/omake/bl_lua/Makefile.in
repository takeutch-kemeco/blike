INC_DIR = @top_srcdir@/include

SUBNAME = bl_lua
SONAME = lib@PACKAGE_NAME@_$(SUBNAME).so
PROG = $(SONAME).@PACKAGE_VERSION@
CFLAGS = @CFLAGS@			\
	-I$(INC_DIR)			\
	-I$(INC_DIR)/common		\
	-I$(INC_DIR)/omake/$(SUBNAME)	\
	`pkg-config lua5.1 --cflags`

LIBS =	@LIBS@				\
	`pkg-config lua5.1 --libs`

SRCS =	bllua_system.c			\
	bllua_regist_bld_func.c		\
	bllua_regist_bl_func.c

OBJS = $(SRCS:.c=.o)

all: $(PROG)

$(PROG): $(OBJS)
	@CC@ -shared -Wl,-soname,$(SONAME) -o $@ $(OBJS) $(LIBS)

.c.o:
	@CC@ -fPIC $(DEFS) $(CFLAGS) -c -o $@ $<

clean:
	rm -f $(OBJS)
	rm -f $(PROG)

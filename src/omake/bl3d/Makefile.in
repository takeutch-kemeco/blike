INC_DIR = @top_srcdir@/include

SUBNAME = bl3d
SONAME = lib@PACKAGE_NAME@_$(SUBNAME).so
PROG = $(SONAME).@PACKAGE_VERSION@
CFLAGS = @CFLAGS@			\
	-I$(INC_DIR)			\
	-I$(INC_DIR)/common		\
	-I$(INC_DIR)/omake/bl_math	\
	-I$(INC_DIR)/omake/$(SUBNAME)
	
LIBS = @LIBS@ -lm

SRCS =	bl3d_system.c \
	bl3d_matrix.c \
	bl3d_math.c \
	bl3d_dobj.c \
	bl3d_packet_pool.c \
	bl3d_frame_buffer.c \
	bl3d_triangle.c

OBJS = $(SRCS:.c=.o)

all: $(PROG)

$(PROG): $(OBJS)
	@CC@ -shared -Wl,-soname,$(SONAME) -o $@ $(OBJS) $(LIBS)

.c.o:
	@CC@ -fPIC $(DEFS) $(CFLAGS) -c -o $@ $<

clean:
	rm -f $(OBJS)
	rm -f $(PROG)
